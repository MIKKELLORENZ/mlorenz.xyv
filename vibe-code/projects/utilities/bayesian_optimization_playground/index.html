<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bayesian Optimization Playground</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Bayesian Optimization Playground</h1>
            <p>Explore and optimize complex functions with Bayesian methods</p>
        </header>

        <!-- Main Menu Cards -->
        <section id="main-menu" class="section active">
            <div class="cards-container">
                <div class="card" onclick="app.showSection('coffee-demo')">
                    <div class="card-icon">‚òï</div>
                    <h3>Coffee Demo</h3>
                    <p>Optimize espresso machine settings using Bayesian optimization to find the perfect brew</p>
                </div>
                <div class="card" onclick="app.showSection('custom-problem')">
                    <div class="card-icon">üîß</div>
                    <h3>Custom Problem</h3>
                    <p>Create and solve your own optimization problems with custom parameters and objectives</p>
                </div>
                <div class="card" onclick="app.showSection('learn')">
                    <div class="card-icon">üìö</div>
                    <h3>What is Bayesian Optimization?</h3>
                    <p>Learn about the theory and applications of Bayesian optimization methods</p>
                </div>
            </div>
        </section>

        <!-- Back Button -->
        <button id="back-btn" class="back-btn" onclick="app.showSection('main-menu')" style="display: none;">
            ‚Üê Back to Menu
        </button>

        <!-- Coffee Demo Section -->
        <section id="coffee-demo" class="section">
            <h2>Espresso Machine Optimization</h2>
            <div class="demo-container">
                <div class="coffee-machine">
                    <div class="machine-visual">
                        <div class="machine-body">
                            <div class="water-tank">
                                <div class="water-level" id="water-level"></div>
                                <div class="water-flow" id="water-flow"></div>
                            </div>
                            <div class="group-head">
                                <div class="water-pipe" id="water-pipe"></div>
                            </div>
                            <div class="portafilter">
                                <div class="coffee-grounds" id="coffee-grounds"></div>
                            </div>
                            <div class="coffee-stream" id="coffee-stream"></div>
                            <div class="cup">
                                <div class="coffee-in-cup" id="coffee-in-cup"></div>
                                <div class="steam" id="steam">
                                    <div class="steam-particle"></div>
                                    <div class="steam-particle"></div>
                                    <div class="steam-particle"></div>
                                </div>
                            </div>
                            <div class="coffee-drops" id="coffee-drops">
                                <div class="drop"></div>
                                <div class="drop"></div>
                                <div class="drop"></div>
                                <div class="drop"></div>
                            </div>
                            <div class="steam-wand"></div>
                            <div class="machine-lights">
                                <div class="power-light" id="power-light"></div>
                                <div class="brewing-light" id="brewing-light"></div>
                            </div>
                        </div>
                    </div>
                    <div class="controls">
                        <div class="parameter">
                            <label for="pressure">Pressure (PSI): <span id="pressure-value">9</span></label>
                            <input type="range" id="pressure" min="6" max="12" value="9" step="0.1">
                        </div>
                        <div class="parameter">
                            <label for="grind">Grind Size: <span id="grind-value">5</span></label>
                            <input type="range" id="grind" min="1" max="10" value="5" step="0.1">
                        </div>
                        <div class="parameter">
                            <label for="temperature">Temperature (¬∞C): <span id="temperature-value">93</span></label>
                            <input type="range" id="temperature" min="85" max="100" value="93" step="0.5">
                        </div>
                        <div class="parameter">
                            <label for="coffee-amount">Coffee Amount (g): <span id="coffee-amount-value">18</span></label>
                            <input type="range" id="coffee-amount" min="14" max="22" value="18" step="0.5">
                        </div>
                        <div class="brewing-controls">
                            <div class="brew-counter">
                                <div class="counter-label">Brews Remaining</div>
                                <div class="counter-display">
                                    <span class="counter-number" id="brews-remaining">30</span>
                                    <div class="counter-bar">
                                        <div class="counter-fill" id="counter-fill"></div>
                                    </div>
                                </div>
                                <div class="counter-hint">Find the perfect brew in 30 tries!</div>
                            </div>
                            <button id="brew-coffee" class="brew-btn">
                                <span class="btn-text">Brew Coffee</span>
                                <span class="btn-spinner" id="brew-spinner"></span>
                            </button>
                        </div>
                        
                        <div class="history-scatter">
                            <h3>Brewing History</h3>
                            <div id="history-scatter">
                                <p>Brew coffee to see score history</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="optimization-panel">
                    <div class="score-row">
                        <div class="current-score">
                            <h3>Current Taste Score</h3>
                            <div class="score-display" id="current-score">?</div>
                        </div>
                        
                        <div class="best-score" onclick="app.coffeeDemo.applyBestSettings()">
                            <h3>Best Coffee So Far</h3>
                            <div class="best-score-display" id="best-score">No brews yet</div>
                            <div class="best-params" id="best-params"></div>
                            <div class="click-hint">Click to apply these settings</div>
                        </div>
                    </div>
                    
                    <div class="recommendations">
                        <h3>Bayesian Optimization Suggestions</h3>
                        <div class="acquisition-selector">
                            <label>Acquisition Function:</label>
                            <div class="radio-group-vertical">
                                <label class="radio-option" id="ei-option" title="Expected Improvement: Balances exploration and exploitation by considering both mean prediction and uncertainty. Good for general optimization.">
                                    <input type="radio" name="acquisition" value="EI" checked>
                                    <span>EI (Expected Improvement)</span>
                                    <div class="recommendation-indicator" id="ei-indicator"></div>
                                </label>
                                <label class="radio-option" id="ucb-option" title="Upper Confidence Bound: More explorative, focuses on uncertain areas. Good for early exploration phases.">
                                    <input type="radio" name="acquisition" value="UCB">
                                    <span>UCB (Upper Confidence Bound)</span>
                                    <div class="recommendation-indicator" id="ucb-indicator"></div>
                                </label>
                                <label class="radio-option" id="pi-option" title="Probability of Improvement: Conservative, focuses on areas likely to improve. Good when you're close to optimal.">
                                    <input type="radio" name="acquisition" value="PI">
                                    <span>PI (Probability of Improvement)</span>
                                    <div class="recommendation-indicator" id="pi-indicator"></div>
                                </label>
                            </div>
                        </div>
                        <div id="suggestion-display">
                            <p>Brew some coffee first to get recommendations!</p>
                        </div>
                    </div>
                    
                    <div class="uncertainty-visualization">
                        <h3>Parameter Uncertainty</h3>
                        <div id="uncertainty-chart">
                            <p>Brew coffee to see uncertainty bands</p>
                        </div>
                        <div class="uncertainty-explanation">
                            <p>üîµ <strong>Blue bands:</strong> Areas where we're confident about coffee quality</p>
                            <p>üî¥ <strong>Red line:</strong> Current settings | üü¢ <strong>Green line:</strong> Suggested settings</p>
                            <p>üí° <strong>Strategy:</strong> Explore outside blue bands to discover new areas!</p>
                        </div>
                    </div>
                    
                </div>
            </div>
            
            <!-- Full-width Parameter Combination Analysis -->
            <div class="parameter-heatmap-full">
                <h3>Parameter Combination Analysis</h3>
                <div id="parameter-heatmap">
                    <p>Brew coffee to see parameter combinations</p>
                </div>
            </div>
        </section>

        <!-- Custom Problem Section -->
        <section id="custom-problem" class="section">
            <h2>Create Custom Optimization Problem</h2>
            <div class="custom-container">
                <div class="project-selector">
                    <h3>Select Project</h3>
                    <select id="project-list">
                        <option value="">Create New Project</option>
                    </select>
                    <button id="new-project-btn">New Project</button>
                    <button id="load-project-btn">Load Project</button>
                    <button id="delete-project-btn">Delete Project</button>
                </div>

                <div class="project-setup" id="project-setup">
                    <h3>Project Setup</h3>
                    <div class="setup-form">
                        <div class="form-group">
                            <label for="project-name">Project Name:</label>
                            <input type="text" id="project-name" placeholder="Enter project name">
                        </div>
                        <div class="form-group">
                            <label for="objective-name">Objective to Optimize:</label>
                            <input type="text" id="objective-name" placeholder="e.g., Conversion Rate, Efficiency, Score">
                        </div>
                        <div class="form-group">
                            <label for="optimization-direction">Optimization Direction:</label>
                            <select id="optimization-direction">
                                <option value="maximize">Maximize</option>
                                <option value="minimize">Minimize</option>
                            </select>
                        </div>
                    </div>

                    <div class="parameters-section">
                        <h4>Parameters</h4>
                        <div id="parameters-list"></div>
                        <button id="add-parameter">Add Parameter</button>
                    </div>

                    <button id="save-project">Save Project</button>
                </div>

                <div class="data-entry" id="data-entry" style="display: none;">
                    <h3>Data Entry</h3>
                    <div class="entry-form" id="entry-form">
                        <!-- Dynamic form will be generated here -->
                    </div>
                    <button id="add-data-point">Add Data Point</button>
                    <button id="get-optimization-suggestion">Get Optimization Suggestion</button>
                </div>

                <div class="results-display" id="results-display">
                    <h3>Results</h3>
                    <div id="optimization-results"></div>
                    <div id="data-visualization"></div>
                </div>
            </div>
        </section>

        <!-- Learn Section -->
        <section id="learn" class="section">
            <h2>What is Bayesian Optimization?</h2>
            <div class="learn-content">
                <p>Placeholder for educational content about Bayesian optimization...</p>
                <p>This section will contain interactive explanations, visualizations, and examples.</p>
            </div>
        </section>
    </div>

    <script src="script.js"></script>
    <script src="coffee-demo.js"></script>
    <script src="custom-problem.js"></script>
    <script src="bayesian-education.js"></script>
</body>
</html>